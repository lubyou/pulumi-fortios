// Code generated by the Pulumi Terraform Bridge (tfgen) Tool DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package fortios

import (
	"context"
	"reflect"

	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Configure a forward server group consisting or multiple forward servers. Supports failover and load balancing.
//
// ## Example Usage
//
// ```go
// package main
//
// import (
// 	"github.com/lubyou/pulumi-fortios/sdk/go/fortios"
// 	"github.com/pulumi/pulumi-fortios/sdk/go/fortios"
// 	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
// )
//
// func main() {
// 	pulumi.Run(func(ctx *pulumi.Context) error {
// 		trname1WebProxyForwardServer, err := fortios.NewWebProxyForwardServer(ctx, "trname1WebProxyForwardServer", &fortios.WebProxyForwardServerArgs{
// 			AddrType:         pulumi.String("fqdn"),
// 			Healthcheck:      pulumi.String("disable"),
// 			Ip:               pulumi.String("0.0.0.0"),
// 			Monitor:          pulumi.String("http://www.google.com"),
// 			Port:             pulumi.Int(1128),
// 			ServerDownOption: pulumi.String("block"),
// 		})
// 		if err != nil {
// 			return err
// 		}
// 		_, err = fortios.NewWebProxyForwardServerGroup(ctx, "trname1WebProxyForwardServerGroup", &fortios.WebProxyForwardServerGroupArgs{
// 			Affinity:        pulumi.String("disable"),
// 			GroupDownOption: pulumi.String("block"),
// 			LdbMethod:       pulumi.String("weighted"),
// 			ServerLists: WebProxyForwardServerGroupServerListArray{
// 				&WebProxyForwardServerGroupServerListArgs{
// 					Name:   trname1WebProxyForwardServer.Name,
// 					Weight: pulumi.Int(12),
// 				},
// 			},
// 		})
// 		if err != nil {
// 			return err
// 		}
// 		return nil
// 	})
// }
// ```
//
// ## Import
//
// WebProxy ForwardServerGroup can be imported using any of these accepted formats
//
// ```sh
//  $ pulumi import fortios:index/webProxyForwardServerGroup:WebProxyForwardServerGroup labelname {{name}}
// ```
//
//  If you do not want to import arguments of block$ export "FORTIOS_IMPORT_TABLE"="false"
//
// ```sh
//  $ pulumi import fortios:index/webProxyForwardServerGroup:WebProxyForwardServerGroup labelname {{name}}
// ```
//
//  $ unset "FORTIOS_IMPORT_TABLE"
type WebProxyForwardServerGroup struct {
	pulumi.CustomResourceState

	// Enable/disable affinity, attaching a source-ip's traffic to the assigned forwarding server until the forward-server-affinity-timeout is reached (under web-proxy global). Valid values: `enable`, `disable`.
	Affinity pulumi.StringOutput `pulumi:"affinity"`
	// true or false, set this parameter to true when using dynamic forEach + toset to configure and sort sub-tables, please do not set this parameter when configuring static sub-tables.
	DynamicSortSubtable pulumi.StringPtrOutput `pulumi:"dynamicSortSubtable"`
	// Action to take when all of the servers in the forward server group are down: block sessions until at least one server is back up or pass sessions to their destination. Valid values: `block`, `pass`.
	GroupDownOption pulumi.StringOutput `pulumi:"groupDownOption"`
	// Load balance method: weighted or least-session.
	LdbMethod pulumi.StringOutput `pulumi:"ldbMethod"`
	// Forward server name.
	Name pulumi.StringOutput `pulumi:"name"`
	// Add web forward servers to a list to form a server group. Optionally assign weights to each server. The structure of `serverList` block is documented below.
	ServerLists WebProxyForwardServerGroupServerListArrayOutput `pulumi:"serverLists"`
	// Specifies the vdom to which the resource will be applied when the FortiGate unit is running in VDOM mode. Only one vdom can be specified. If you want to inherit the vdom configuration of the provider, please do not set this parameter.
	Vdomparam pulumi.StringPtrOutput `pulumi:"vdomparam"`
}

// NewWebProxyForwardServerGroup registers a new resource with the given unique name, arguments, and options.
func NewWebProxyForwardServerGroup(ctx *pulumi.Context,
	name string, args *WebProxyForwardServerGroupArgs, opts ...pulumi.ResourceOption) (*WebProxyForwardServerGroup, error) {
	if args == nil {
		args = &WebProxyForwardServerGroupArgs{}
	}

	opts = pkgResourceDefaultOpts(opts)
	var resource WebProxyForwardServerGroup
	err := ctx.RegisterResource("fortios:index/webProxyForwardServerGroup:WebProxyForwardServerGroup", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetWebProxyForwardServerGroup gets an existing WebProxyForwardServerGroup resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetWebProxyForwardServerGroup(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *WebProxyForwardServerGroupState, opts ...pulumi.ResourceOption) (*WebProxyForwardServerGroup, error) {
	var resource WebProxyForwardServerGroup
	err := ctx.ReadResource("fortios:index/webProxyForwardServerGroup:WebProxyForwardServerGroup", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering WebProxyForwardServerGroup resources.
type webProxyForwardServerGroupState struct {
	// Enable/disable affinity, attaching a source-ip's traffic to the assigned forwarding server until the forward-server-affinity-timeout is reached (under web-proxy global). Valid values: `enable`, `disable`.
	Affinity *string `pulumi:"affinity"`
	// true or false, set this parameter to true when using dynamic forEach + toset to configure and sort sub-tables, please do not set this parameter when configuring static sub-tables.
	DynamicSortSubtable *string `pulumi:"dynamicSortSubtable"`
	// Action to take when all of the servers in the forward server group are down: block sessions until at least one server is back up or pass sessions to their destination. Valid values: `block`, `pass`.
	GroupDownOption *string `pulumi:"groupDownOption"`
	// Load balance method: weighted or least-session.
	LdbMethod *string `pulumi:"ldbMethod"`
	// Forward server name.
	Name *string `pulumi:"name"`
	// Add web forward servers to a list to form a server group. Optionally assign weights to each server. The structure of `serverList` block is documented below.
	ServerLists []WebProxyForwardServerGroupServerList `pulumi:"serverLists"`
	// Specifies the vdom to which the resource will be applied when the FortiGate unit is running in VDOM mode. Only one vdom can be specified. If you want to inherit the vdom configuration of the provider, please do not set this parameter.
	Vdomparam *string `pulumi:"vdomparam"`
}

type WebProxyForwardServerGroupState struct {
	// Enable/disable affinity, attaching a source-ip's traffic to the assigned forwarding server until the forward-server-affinity-timeout is reached (under web-proxy global). Valid values: `enable`, `disable`.
	Affinity pulumi.StringPtrInput
	// true or false, set this parameter to true when using dynamic forEach + toset to configure and sort sub-tables, please do not set this parameter when configuring static sub-tables.
	DynamicSortSubtable pulumi.StringPtrInput
	// Action to take when all of the servers in the forward server group are down: block sessions until at least one server is back up or pass sessions to their destination. Valid values: `block`, `pass`.
	GroupDownOption pulumi.StringPtrInput
	// Load balance method: weighted or least-session.
	LdbMethod pulumi.StringPtrInput
	// Forward server name.
	Name pulumi.StringPtrInput
	// Add web forward servers to a list to form a server group. Optionally assign weights to each server. The structure of `serverList` block is documented below.
	ServerLists WebProxyForwardServerGroupServerListArrayInput
	// Specifies the vdom to which the resource will be applied when the FortiGate unit is running in VDOM mode. Only one vdom can be specified. If you want to inherit the vdom configuration of the provider, please do not set this parameter.
	Vdomparam pulumi.StringPtrInput
}

func (WebProxyForwardServerGroupState) ElementType() reflect.Type {
	return reflect.TypeOf((*webProxyForwardServerGroupState)(nil)).Elem()
}

type webProxyForwardServerGroupArgs struct {
	// Enable/disable affinity, attaching a source-ip's traffic to the assigned forwarding server until the forward-server-affinity-timeout is reached (under web-proxy global). Valid values: `enable`, `disable`.
	Affinity *string `pulumi:"affinity"`
	// true or false, set this parameter to true when using dynamic forEach + toset to configure and sort sub-tables, please do not set this parameter when configuring static sub-tables.
	DynamicSortSubtable *string `pulumi:"dynamicSortSubtable"`
	// Action to take when all of the servers in the forward server group are down: block sessions until at least one server is back up or pass sessions to their destination. Valid values: `block`, `pass`.
	GroupDownOption *string `pulumi:"groupDownOption"`
	// Load balance method: weighted or least-session.
	LdbMethod *string `pulumi:"ldbMethod"`
	// Forward server name.
	Name *string `pulumi:"name"`
	// Add web forward servers to a list to form a server group. Optionally assign weights to each server. The structure of `serverList` block is documented below.
	ServerLists []WebProxyForwardServerGroupServerList `pulumi:"serverLists"`
	// Specifies the vdom to which the resource will be applied when the FortiGate unit is running in VDOM mode. Only one vdom can be specified. If you want to inherit the vdom configuration of the provider, please do not set this parameter.
	Vdomparam *string `pulumi:"vdomparam"`
}

// The set of arguments for constructing a WebProxyForwardServerGroup resource.
type WebProxyForwardServerGroupArgs struct {
	// Enable/disable affinity, attaching a source-ip's traffic to the assigned forwarding server until the forward-server-affinity-timeout is reached (under web-proxy global). Valid values: `enable`, `disable`.
	Affinity pulumi.StringPtrInput
	// true or false, set this parameter to true when using dynamic forEach + toset to configure and sort sub-tables, please do not set this parameter when configuring static sub-tables.
	DynamicSortSubtable pulumi.StringPtrInput
	// Action to take when all of the servers in the forward server group are down: block sessions until at least one server is back up or pass sessions to their destination. Valid values: `block`, `pass`.
	GroupDownOption pulumi.StringPtrInput
	// Load balance method: weighted or least-session.
	LdbMethod pulumi.StringPtrInput
	// Forward server name.
	Name pulumi.StringPtrInput
	// Add web forward servers to a list to form a server group. Optionally assign weights to each server. The structure of `serverList` block is documented below.
	ServerLists WebProxyForwardServerGroupServerListArrayInput
	// Specifies the vdom to which the resource will be applied when the FortiGate unit is running in VDOM mode. Only one vdom can be specified. If you want to inherit the vdom configuration of the provider, please do not set this parameter.
	Vdomparam pulumi.StringPtrInput
}

func (WebProxyForwardServerGroupArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*webProxyForwardServerGroupArgs)(nil)).Elem()
}

type WebProxyForwardServerGroupInput interface {
	pulumi.Input

	ToWebProxyForwardServerGroupOutput() WebProxyForwardServerGroupOutput
	ToWebProxyForwardServerGroupOutputWithContext(ctx context.Context) WebProxyForwardServerGroupOutput
}

func (*WebProxyForwardServerGroup) ElementType() reflect.Type {
	return reflect.TypeOf((**WebProxyForwardServerGroup)(nil)).Elem()
}

func (i *WebProxyForwardServerGroup) ToWebProxyForwardServerGroupOutput() WebProxyForwardServerGroupOutput {
	return i.ToWebProxyForwardServerGroupOutputWithContext(context.Background())
}

func (i *WebProxyForwardServerGroup) ToWebProxyForwardServerGroupOutputWithContext(ctx context.Context) WebProxyForwardServerGroupOutput {
	return pulumi.ToOutputWithContext(ctx, i).(WebProxyForwardServerGroupOutput)
}

// WebProxyForwardServerGroupArrayInput is an input type that accepts WebProxyForwardServerGroupArray and WebProxyForwardServerGroupArrayOutput values.
// You can construct a concrete instance of `WebProxyForwardServerGroupArrayInput` via:
//
//          WebProxyForwardServerGroupArray{ WebProxyForwardServerGroupArgs{...} }
type WebProxyForwardServerGroupArrayInput interface {
	pulumi.Input

	ToWebProxyForwardServerGroupArrayOutput() WebProxyForwardServerGroupArrayOutput
	ToWebProxyForwardServerGroupArrayOutputWithContext(context.Context) WebProxyForwardServerGroupArrayOutput
}

type WebProxyForwardServerGroupArray []WebProxyForwardServerGroupInput

func (WebProxyForwardServerGroupArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*WebProxyForwardServerGroup)(nil)).Elem()
}

func (i WebProxyForwardServerGroupArray) ToWebProxyForwardServerGroupArrayOutput() WebProxyForwardServerGroupArrayOutput {
	return i.ToWebProxyForwardServerGroupArrayOutputWithContext(context.Background())
}

func (i WebProxyForwardServerGroupArray) ToWebProxyForwardServerGroupArrayOutputWithContext(ctx context.Context) WebProxyForwardServerGroupArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(WebProxyForwardServerGroupArrayOutput)
}

// WebProxyForwardServerGroupMapInput is an input type that accepts WebProxyForwardServerGroupMap and WebProxyForwardServerGroupMapOutput values.
// You can construct a concrete instance of `WebProxyForwardServerGroupMapInput` via:
//
//          WebProxyForwardServerGroupMap{ "key": WebProxyForwardServerGroupArgs{...} }
type WebProxyForwardServerGroupMapInput interface {
	pulumi.Input

	ToWebProxyForwardServerGroupMapOutput() WebProxyForwardServerGroupMapOutput
	ToWebProxyForwardServerGroupMapOutputWithContext(context.Context) WebProxyForwardServerGroupMapOutput
}

type WebProxyForwardServerGroupMap map[string]WebProxyForwardServerGroupInput

func (WebProxyForwardServerGroupMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*WebProxyForwardServerGroup)(nil)).Elem()
}

func (i WebProxyForwardServerGroupMap) ToWebProxyForwardServerGroupMapOutput() WebProxyForwardServerGroupMapOutput {
	return i.ToWebProxyForwardServerGroupMapOutputWithContext(context.Background())
}

func (i WebProxyForwardServerGroupMap) ToWebProxyForwardServerGroupMapOutputWithContext(ctx context.Context) WebProxyForwardServerGroupMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(WebProxyForwardServerGroupMapOutput)
}

type WebProxyForwardServerGroupOutput struct{ *pulumi.OutputState }

func (WebProxyForwardServerGroupOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**WebProxyForwardServerGroup)(nil)).Elem()
}

func (o WebProxyForwardServerGroupOutput) ToWebProxyForwardServerGroupOutput() WebProxyForwardServerGroupOutput {
	return o
}

func (o WebProxyForwardServerGroupOutput) ToWebProxyForwardServerGroupOutputWithContext(ctx context.Context) WebProxyForwardServerGroupOutput {
	return o
}

type WebProxyForwardServerGroupArrayOutput struct{ *pulumi.OutputState }

func (WebProxyForwardServerGroupArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*WebProxyForwardServerGroup)(nil)).Elem()
}

func (o WebProxyForwardServerGroupArrayOutput) ToWebProxyForwardServerGroupArrayOutput() WebProxyForwardServerGroupArrayOutput {
	return o
}

func (o WebProxyForwardServerGroupArrayOutput) ToWebProxyForwardServerGroupArrayOutputWithContext(ctx context.Context) WebProxyForwardServerGroupArrayOutput {
	return o
}

func (o WebProxyForwardServerGroupArrayOutput) Index(i pulumi.IntInput) WebProxyForwardServerGroupOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *WebProxyForwardServerGroup {
		return vs[0].([]*WebProxyForwardServerGroup)[vs[1].(int)]
	}).(WebProxyForwardServerGroupOutput)
}

type WebProxyForwardServerGroupMapOutput struct{ *pulumi.OutputState }

func (WebProxyForwardServerGroupMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*WebProxyForwardServerGroup)(nil)).Elem()
}

func (o WebProxyForwardServerGroupMapOutput) ToWebProxyForwardServerGroupMapOutput() WebProxyForwardServerGroupMapOutput {
	return o
}

func (o WebProxyForwardServerGroupMapOutput) ToWebProxyForwardServerGroupMapOutputWithContext(ctx context.Context) WebProxyForwardServerGroupMapOutput {
	return o
}

func (o WebProxyForwardServerGroupMapOutput) MapIndex(k pulumi.StringInput) WebProxyForwardServerGroupOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *WebProxyForwardServerGroup {
		return vs[0].(map[string]*WebProxyForwardServerGroup)[vs[1].(string)]
	}).(WebProxyForwardServerGroupOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*WebProxyForwardServerGroupInput)(nil)).Elem(), &WebProxyForwardServerGroup{})
	pulumi.RegisterInputType(reflect.TypeOf((*WebProxyForwardServerGroupArrayInput)(nil)).Elem(), WebProxyForwardServerGroupArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*WebProxyForwardServerGroupMapInput)(nil)).Elem(), WebProxyForwardServerGroupMap{})
	pulumi.RegisterOutputType(WebProxyForwardServerGroupOutput{})
	pulumi.RegisterOutputType(WebProxyForwardServerGroupArrayOutput{})
	pulumi.RegisterOutputType(WebProxyForwardServerGroupMapOutput{})
}
